"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=function(){function e(e){void 0===e&&(e=""),this.key=new String(e)}return e.prototype.toString=function(){return"InjectionToken("+this.key+")"},e}(),n=function(){function e(e){void 0===e&&(e=""),this.key=new String(e)}return e.prototype.toString=function(){return"ScopeToken("+this.key+")"},e}(),r=new n("DEFAULT_SCOPE"),i=new t("PARENT_SCOPE"),o=function(){function e(){this._wm=new WeakMap}return e.prototype.get=function(e){return this._wm.get(e)},e.prototype.has=function(e){return this._wm.has(e)},e.prototype.set=function(e,t){return this._wm.set(e,t),this},e}(),s=new WeakMap,u=e.createContext(r);function a(e,t){void 0===t&&(t=r);var n=s.get(t);if(!n)throw new Error("The given scope is not defined");if(!n.has(e)){if(n.has(i))return a(e,n.get(i));throw new Error("Injectables have to be provided in a module.")}return n.get(e)}function c(e){return function(e){return!("initValue"in e||"initFactory"in e||"initClass"in e)}(e)?{initClass:e,provider:e}:e}function f(e,t,u){void 0===t&&(t=r);var a=t instanceof n?t:new n(t);s.has(a)||s.set(a,new o);var f=s.get(a);if(!f)throw new Error("Something went wrong - Dependency map couldn't be generated");if(u){if(f.has(i))throw new Error("Parent scope can't be redefined");f.set(i,u)}for(var p=0,d=e;p<d.length;p++){var v=c(d[p]),w=v.provider;"initClass"in v?f.set(w,new v.initClass(a)):"initValue"in v?f.set(w,v.initValue):"initFactory"in v&&f.set(w,v.initFactory(a))}return a}function p(e,t,i){void 0===t&&(t=r);var u=t instanceof n?t:new n(t);return s.set(u,new o),f(e,u,i)}exports.DefineModule=f,exports.GenerateTestBed=p,exports.InjectionProvider=function(t){var r=t.children,i=t.parentScope,o=t.providers,s=t.scope,a=t.test,c=e.useContext(u),d=i||(a?void 0:c),v=s||(a?void 0:new n("CONTEXT_SCOPE")),w=a?p(o,v,d):f(o,v,d);return e.createElement(u.Provider,{value:w},r)},exports.InjectionToken=t,exports.inject=a,exports.useInject=function(t,n){var r=e.useContext(u),i=n||r;return e.useMemo((function(){return a(t,i)}),[t,i])};
